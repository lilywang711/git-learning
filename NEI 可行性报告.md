> 作者：王小英
>
> 日期：2020年6月15日

分析 NEI 的动机：团队在长期使用 YApi 后，发现 YApi 有诸多方面的不足，比如缺失最重要的数据模型功能。没有这个功能，就会导致一旦改变了某个字段名，就需要在多个接口中同时做修改，这在实际开发迭代中非常耗时。这种重复无意义的工作如果能通过更好用的接口管理平台来消除掉那再好不过啦。

# 简介

NEI 是一款由网易打造的于 2020 年 4 月 1 号正式开源的一款接口管理平台，此项目最初为网易内部使用，在功能逐渐趋于完善稳定后决定开源出来。贴一段官方公布的数据：

> 截止目前（2020 年 4 月 1 号），NEI 的注册用户超过 2 万 2 千（包括网易公司内部用户以及外部公司用户），接口数量超过 23 万，数据模型数量超过 28 万，内部产品（NEI 接口数量超过 100 的项目组）有 140 个之多，外部产品有 270 个之多

以下引自官方介绍文档：

NEI 按项目来管理所有资源，资源的创建和维护可由团队成员协作完成，目前它已经提供了以下功能：

- 项目管理：动态、团队管理、权限管理、项目文档等
- 页面管理：项目中的页面定义
- 异步接口：即本文所说的 API，可以定义请求头、请求数据、发送规则、响应头、响应结果、接收规则等
- 接口测试和用例管理：方便回归测试和生成测试代码
- 数据模型：NEI 中最强大的功能之一，对应数据库中的实体对象
- 页面模板：NEI 配套的[构建工具](https://link.zhihu.com/?target=https%3A//github.com/NEYouFan/nei-toolkit)会根据定义生成模板文件
- 规则函数：自定义 MOCK 数据，NEI 也预置了常见的规则函数
- 业务分组：按照业务对项目资源进行细分，方便管理
- 工程规范：本身可以当作脚手架，也可以和 NEI 项目结合，集成项目中的 API 和数据模型
- 消息中心：保证重要的操作能及时通知到相关负责人

# YApi 与 NEI 功能点对比

| 功能         | YApi | NEI  |
| ------------ | ---- | ---- |
| 项目管理     | ✔️    | ✔️    |
| 接口管理     | ✔️    | ✔️    |
| 角色管理     | ✔️    | ✔️    |
| 分组功能     | ✔️    | ✔️    |
| 标签功能     | ✔️    | ✔️    |
| 接口版本     | ✖️    | ✔️    |
| 生成接口文档 | ✖️    | ✔️    |
| 接口测试     | ✔️    | ✔️    |
| 自定义 Mock  | ✔️    | ✔️    |
| 自定义规则   | ✖️    | ✔️    |
| json 导入    | ✔️    | ✔️    |
| 接口审核     | ✖️    | ✔️    |
| 接口操作历史 | ✔️    | ✔️    |
| 数据模型     | ✔️    | ✔️    |
| 公共资源库   | ✖️    | ✔️    |
| 一键 CRUD    | ✖️    | ✔️    |
| RPC 接口     | ✖️    | ✔️    |
| 私有化部署   | ✔️    | ✔️    |

# 总结

经过上面的功能点对比，能总结一点： YApi 有的，NEI  都有，且在 saas 项目两周多的实践中使用数据模型确实帮助开发者节省了不少时间。因此在超猩项目中推广使用是可行的。但仍需要客观的面对它目前的缺点：

1. 界面、操作体验不如 YApi
2. 一些不影响主流程的小 bug，例如接口测试里必填字段与数据模型隐藏字段的优先级问题
3. 进阶使用的上手难度更高。例如 NEI 有不常见的 MockStore 新概念，已经学习如何自定义规则
4. NEI 使用的技术栈并非超猩前端 er熟知的，想定制化开发较 YApi(react+koa) 难度更大





附：

1. 超猩内网地址：http://nei.internal.supermonkey.com.cn/
2. 官方 github:  https://github.com/x-orpheus/nei-toolkit