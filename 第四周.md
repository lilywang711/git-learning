# æ·±å…¥äº†è§£ Git ç”¨æ³• - ç¬¬å››å‘¨

> å†¬æ—

- git pull
- git stash
- git cherry-pick

## git pull
 ### git pull çš„å‡ ç§å¸¸ç”¨æ¨¡å¼
   - ```git pull --no-rebase``` # é»˜è®¤ç­–ç•¥(ä¸ä½¿ç”¨å˜åŸºåˆå¹¶)
   - ```git pull --rebase``` # ä½¿ç”¨å˜åŸºåˆå¹¶
   - ```git pull --ff-only``` # åªä½¿ç”¨ fast-forward åˆå¹¶ï¼Œ å½“ä¸èƒ½å¿«è¿›åˆå¹¶æ˜¯ï¼Œ æ‹’ç»åˆå¹¶ã€‚

 #### é…ç½® git pull åˆå¹¶ç­–ç•¥

 -  ```git config pull.rebase false  # merge (the default strategy)```
 -  ```git config pull.rebase true   # rebase ```
 -  ``` git config pull.ff only   # fast-forward only ```

> ä¸Šé¢çš„å‘½ä»¤åªé’ˆå¯¹æŸä¸ªä»“åº“é…ç½®ï¼Œè¦é…ç½®å…¨å±€çš„ç­–ç•¥ï¼ŒåŠ ä¸Š **--global**  ğŸŒ°ï¼š``` git config --global  pull.rebase true```

> :apple: è®¨è®ºï¼š é‚£ç§ git pull æ¨¡å¼æœ€é€‚åˆæˆ‘ä»¬ï¼Ÿ111

## git stash
æœ‰æ—¶ï¼Œå½“ä½ åœ¨é¡¹ç›®çš„ä¸€éƒ¨åˆ†ä¸Šå·²ç»å·¥ä½œä¸€æ®µæ—¶é—´åï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½è¿›å…¥äº†æ··ä¹±çš„çŠ¶æ€ï¼Œ è€Œè¿™æ—¶ä½ æƒ³è¦åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯åšä¸€ç‚¹åˆ«çš„äº‹æƒ…ã€‚ é—®é¢˜æ˜¯ï¼Œä½ ä¸æƒ³ä»…ä»…å› ä¸ºè¿‡ä¼šå„¿å›åˆ°è¿™ä¸€ç‚¹è€Œä¸ºåšäº†ä¸€åŠçš„å·¥ä½œåˆ›å»ºä¸€æ¬¡æäº¤ã€‚ é’ˆå¯¹è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯ ```git stash``` å‘½ä»¤.

#### è´®è— 
> PS (ä»¥ä¸‹å‘½ä»¤åœ¨éƒ¨åˆ†è¾ƒè€çš„ Git ç‰ˆæœ¬å¯èƒ½æ— æ³•ä½¿ç”¨ï¼Œå»ºè®®å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬çš„ Git)
```bash
$ git stash/git stash push # è´®è—æ‰€æœ‰çš„å·²è·Ÿè¸ªçš„æ–‡ä»¶
$ git stash -u # è´®è—æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬æœªè·Ÿè¸ªçš„æ–‡ä»¶(é™¤äº†å·²å¿½ç•¥çš„æ–‡ä»¶)
$ git stash push -u -m 'è´®è—çš„æè¿°ä¿¡æ¯' # å¸¦æœ‰æè¿°ä¿¡æ¯çš„è´®è—
# å¼ºçƒˆå»ºè®® è´®è—æ—¶æ·»åŠ æè¿°ä¿¡æ¯.å¦‚æœæ²¡æœ‰æ‰‹åŠ¨æ·»åŠ ï¼Œåˆ™æè¿°ä¿¡æ¯åˆ™æ˜¯å½“å‰ HEAD æ‰€æŒ‡ commit çš„ ä¿¡æ¯ã€‚
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œ```git stash``` åªä¼šè´®è—å·²ä¿®æ”¹å’Œæš‚å­˜çš„ å·²è·Ÿè¸ª æ–‡ä»¶ã€‚ å¦‚æœæŒ‡å®š ```--include-untracked``` æˆ– ```-u``` é€‰é¡¹ï¼ŒGit ä¹Ÿä¼šè´®è—ä»»ä½•æœªè·Ÿè¸ªæ–‡ä»¶ã€‚ ç„¶è€Œï¼Œåœ¨è´®è—ä¸­åŒ…å«æœªè·Ÿè¸ªçš„æ–‡ä»¶ä»ç„¶ä¸ä¼šåŒ…å«æ˜ç¡® å¿½ç•¥ çš„æ–‡ä»¶ã€‚ è¦é¢å¤–åŒ…å«å¿½ç•¥çš„æ–‡ä»¶ï¼Œè¯·ä½¿ç”¨ ```--all``` æˆ– ```-a``` é€‰é¡¹ã€‚



> Note: æˆªè‡³ 2017 å¹´ 10 æœˆä¸‹æ—¬ï¼ŒGit é‚®ä»¶åˆ—è¡¨ä¸Šè¿›è¡Œäº†å¹¿æ³›è®¨è®ºï¼Œè¯¥è®¨è®ºä¸­å¼ƒç”¨äº† git stash save å‘½ä»¤ï¼Œ ä»£ä¹‹ä»¥ç°æœ‰ git stash push å‘½ä»¤ã€‚ä¸»å› æ˜¯ git stash push å¼•å…¥äº†è´®è—é€‰å®šçš„ è·¯å¾„è§„èŒƒ çš„é€‰é¡¹ï¼Œ è€Œæœ‰äº›ä¸œè¥¿ git stash save ä¸æ”¯æŒ

#### æŸ¥çœ‹è´®è—
```bash
$ git stash list # æŸ¥çœ‹è´®è—åˆ—è¡¨
------------------------------------
æ —å­æ•ˆæœï¼š
stash@{0}: On master: è¿™æ˜¯è´®è—ä¿¡æ¯2
stash@{1}: On master: è¿™æ˜¯è´®è—ä¿¡æ¯
# 
------------------------------------
$ git stash show # æŸ¥çœ‹
# æƒ³çœ‹ æŸæ¬¡ stash åšäº†ä»€ä¹ˆæ”¹åŠ¨ï¼Œç±»ä¼¼ç®€åŒ–ç‰ˆçš„ git diff
git stash show stash@{0} # å¦‚æœä¸æŒ‡å®šç¬¬å‡ æ¬¡ï¼Œåˆ™æ˜¾ç¤ºæ ˆé¡¶çš„é‚£æ¬¡ stash@{0}
------------------------------------
æ —å­æ•ˆæœï¼š
ç¬¬å››å‘¨.md | 25 +++++++++++++++++++++++++
 1 file changed, 25 insertions(+)
------------------------------------
```
#### åº”ç”¨è´®è—
```bash
$ git stash apply stash@{2} æ¢å¤ç¬¬å‡ ä¸ªå‚¨è—
$ git stash apply ä¸æŒ‡å®šï¼Œåˆ™è®¤ä¸ºæ¢å¤æœ€è¿‘çš„é‚£ä¸ªå‚¨è—(æ ˆé¡¶çš„é‚£ä¸ªï¼Œstash@{0})
$ git stash pop # åº”ç”¨ä¸Šä¸€æ¬¡çš„å‚¨è—ï¼Œå¹¶ä¸”åœ¨é˜Ÿæ ˆä¸Šç«‹å³åˆ é™¤å®ƒ
$ git stash pop stash@{1}
# åº”ç”¨æŒ‡å®šæŸæ¬¡å‚¨è—ï¼Œå¹¶ä¸”åœ¨é˜Ÿæ ˆä¸Šç«‹å³åˆ é™¤å®ƒ
```
åº”ç”¨é€‰é¡¹åªä¼šå°è¯•åº”ç”¨æš‚å­˜çš„å·¥ä½œâ€”â€”åœ¨å †æ ˆä¸Šè¿˜æœ‰å®ƒã€‚ å¯ä»¥è¿è¡Œ ```git stash drop``` åŠ ä¸Šå°†è¦ç§»é™¤çš„å‚¨è—çš„åå­—æ¥ç§»é™¤å®ƒ

#### åˆ é™¤è´®è—
```bash
git stash drop stash@{n}
git stash clear # æ…ç”¨ï¼, æ¸…ç©ºæ‰€æœ‰ stash
```

#### ä»è´®è—åˆ›å»ºä¸€ä¸ªåˆ†æ”¯
```bash
$ git stash branch <new branchname> # åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œæ£€å‡ºè´®è—å·¥ä½œæ—¶æ‰€åœ¨çš„æäº¤ï¼Œé‡æ–°åœ¨é‚£åº”ç”¨å·¥ä½œï¼Œç„¶ååœ¨åº”ç”¨æˆåŠŸåä¸¢å¼ƒè´®è—ï¼š
$ git stash branch <name> stash@{1} # æŒ‡å®šæŸæ¬¡è´®è—
```

## git cherry-pick

#### åº”ç”¨å•æ¬¡æäº¤
```bash
$ git cherry-pick <commit id> # å°†åˆ¶å®š commit Id çš„é‚£æ¬¡æäº¤åº”ç”¨åˆ°å½“å‰åˆ†æ”¯
$ git cherry-pick feature # å°† featureåˆ†æ”¯çš„ æœ€è¿‘ä¸€æ¬¡æäº¤ï¼Œè½¬ç§»åˆ°å½“å‰åˆ†æ”¯
```
> å½“æ‰§è¡Œå®Œ ```cherry-pick``` ä»¥åï¼Œå°†ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„æäº¤ï¼›è¿™ä¸ªæ–°çš„æäº¤çš„å“ˆå¸Œå€¼å’ŒåŸæ¥çš„ä¸åŒï¼Œä½†æ ‡è¯†åä¸€æ ·ï¼›

#### åº”ç”¨å¤šæ¬¡æäº¤
```bash
$ git cherry-pick <commitId1> <commitId2>...  # å°† commitId1,commitId2... ç­‰æäº¤åº”ç”¨åˆ°å½“å‰åˆ†æ”¯ã€‚
$ git cherry-pick A..B  # å°† A åˆ° B ä¹‹é—´çš„æ‰€æœ‰æäº¤åº”ç”¨åˆ° å½“å‰åˆ†æ”¯, (A, B]. ä¸åŒ…æ‹¬ A
$ git cherry-pick A^..B # å°† A åˆ° B ä¹‹é—´çš„æ‰€æœ‰æäº¤åº”ç”¨åˆ° å½“å‰åˆ†æ”¯,[A, B]. åŒ…æ‹¬ A
# å®ƒä»¬å¿…é¡»æŒ‰ç…§æ­£ç¡®çš„é¡ºåºæ”¾ç½®ï¼šæäº¤ A å¿…é¡»æ—©äºæäº¤ Bï¼Œå¦åˆ™å‘½ä»¤å°†å¤±è´¥ï¼Œä½†ä¸ä¼šæŠ¥é”™ã€‚
```
#### cherry-pick é…ç½®é¡¹
1. ```-e```, ```--edit``` æ‰“å¼€å¤–éƒ¨ç¼–è¾‘å™¨ï¼Œç¼–è¾‘æäº¤ä¿¡æ¯ã€‚
2. ```-nï¼Œ--no-commit``` åªæ›´æ–°å·¥ä½œåŒºå’Œæš‚å­˜åŒºï¼Œä¸äº§ç”Ÿæ–°çš„æäº¤, å¯ä»¥ç”¨æ¥å‹ç¼©æäº¤
3. ```-x```  åœ¨æäº¤ä¿¡æ¯çš„æœ«å°¾è¿½åŠ ä¸€è¡Œ(cherry picked from commit ...)ï¼Œæ–¹ä¾¿ä»¥åæŸ¥åˆ°è¿™ä¸ªæäº¤æ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€‚
4. ```-sï¼Œ--signoff```
5. ```-m parent-number```, ```--mainline parent-number```

å¦‚æœåŸå§‹æäº¤æ˜¯ä¸€ä¸ªåˆå¹¶èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ˜¯ç”±ä¸‰æ–¹åˆå¹¶äº§ç”Ÿçš„æäº¤ï¼Œé‚£ä¹ˆ cherry pick é»˜è®¤å°†å¤±è´¥ï¼Œå› ä¸ºå®ƒä¸çŸ¥é“åº”è¯¥é‡‡ç”¨å“ªä¸ªåˆ†æ”¯çš„ä»£ç å˜åŠ¨ã€‚
**-m** é…ç½®é¡¹å‘Šè¯‰ Gitï¼Œåº”è¯¥é‡‡ç”¨å“ªä¸ªåˆ†æ”¯çš„å˜åŠ¨ã€‚å®ƒçš„å‚æ•° parent-number æ˜¯ä¸€ä¸ªä» 1 å¼€å§‹çš„æ•´æ•°ï¼Œä»£è¡¨åŸå§‹æäº¤çš„çˆ¶åˆ†æ”¯ç¼–å·ã€‚
```bash
$ git cherry-pick -m 1 <commitId>
```
ä¸€èˆ¬æ¥è¯´ï¼Œ1å·çˆ¶åˆ†æ”¯æ˜¯æ¥å—å˜åŠ¨çš„åˆ†æ”¯ï¼ˆthe branch being merged into/ è¢«åˆå¹¶çš„é‚£ä¸ªï¼‰ï¼Œ2å·çˆ¶åˆ†æ”¯æ˜¯ä½œä¸ºå˜åŠ¨æ¥æºçš„åˆ†æ”¯ï¼ˆthe branch being merged from/ å‘ç”Ÿåˆå¹¶æ—¶æ‰€åœ¨çš„åˆ†æ”¯ï¼‰ã€‚

```bash
$ git cherry-pick -m  1 -e b0aabd4 # æŒ‡å®šä½¿ç”¨ 1 å· åˆ†æ”¯ï¼Œå¹¶ä¸”ç¼–è¾‘æäº¤ä¿¡æ¯ã€‚
```
:apple:
æ —å­ï¼š ä¸¾æ —å­

> ps:  ä¸å»ºè®®å¯¹ä¸‰æ–¹åˆå¹¶äº§ç”Ÿçš„æäº¤è¿›è¡Œä¸‰æ–¹åˆå¹¶ã€‚

å‘½ä»¤é›†åˆï¼š

```bash
$ git cherry-pick --continue 
# è§£å†³ä»£ç å†²çªåï¼Œå°†ä¿®æ”¹çš„æ–‡ä»¶é‡æ–°åŠ å…¥æš‚å­˜åŒºï¼ˆgit add .ï¼‰ è®© cherry-pick ç»§ç»­å¤„ç†
$ git cherry-pick --skip # è·³è¿‡å½“å‰ commit ç»§ç»­å¤„ç†å‰©ä½™ commit
$ git cherry-pick --quit # å‘ç”Ÿä»£ç å†²çªåï¼Œé€€å‡º cherry pickï¼Œä½†æ˜¯ä¸å›åˆ°æ“ä½œå‰çš„æ ·å­ã€‚
$ git cherry-pick --abort # å‘ç”Ÿä»£ç å†²çªåï¼Œæ”¾å¼ƒåˆå¹¶ï¼Œå›åˆ°æ“ä½œå‰çš„æ ·å­ã€‚
```


#### å‚è€ƒèµ„æ–™
[why-you-should-use-git-pull-ff-only](https://blog.sffc.xyz/post/185195398930/why-you-should-use-git-pull-ff-only)
[how-to-deal-with-this-git-warning-pulling-without-specifying-how-to-reconcile](https://stackoverflow.com/questions/62653114/how-to-deal-with-this-git-warning-pulling-without-specifying-how-to-reconcile)
[é˜®ä¸€å³°-git cherry-pick æ•™ç¨‹](https://www.ruanyifeng.com/blog/2020/04/git-cherry-pick.html)